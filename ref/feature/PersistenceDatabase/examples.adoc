== Examples

=== Configure Liberty server to persist session data to a database

After you enable the `sessionDatabase` feature, you can create a file named `${shared.config.dir}/httpSessionPersistence.xml` as shown in the following example:

[source, java]
----
<fileset id="DerbyFiles" includes="*.jar" dir="${shared.resource.dir}/derby/client"/>
    <library id="DerbyLib" filesetRef="DerbyFiles"/>
    <jdbcDriver id="DerbyDriver" libraryRef="DerbyLib"/>
    <dataSource id="SessionDS" jdbcDriverRef="DerbyDriver">
        <properties.derby.client user="user1" password="password1"
                                 databaseName="${shared.resource.dir}/databases/SessionDB"
                                 createDatabase="create"/>
    </dataSource>

    <httpSessionDatabase id="SessionDB" dataSourceRef="SessionDS"/>
----
The `dataSourceRef` element points to the `dataSource` element with the `id` attribute SessionDS.
The `jdbcDriverRef` element points to the `jdbcDriver` element with the `id` attrinute DerbyDriver.

Include the shared session management configuration in each of your servers.

For example, create two server.xml files for server instances named s1 and s2, as follows:

----
    ${wlp.user.dir}/servers/s1/server.xml
    ${wlp.user.dir}/servers/s2/server.xml
----
        

[source, java]
----
<server description="Example Server">
    <include location="${shared.config.dir}/httpSessionPersistence.xml"/>
</server>
----
